{"version":3,"sources":["components/Header/Header.js","services/db.service.js","components/FriendForm/FriendForm.js","components/DebtModal/DebtModal.js","components/DebtList/DebtList.js","components/FriendList/FriendList.js","App.js","serviceWorker.js","index.js"],"names":["Header","db","className","startDB","callback","window","indexedDB","request","open","onerror","event","console","error","onsuccess","result","log","onupgradeneeded","target","objectStore","createObjectStore","keyPath","autoIncrement","createIndex","unique","createFriendStore","removeDebt","friendId","debtId","success","transaction","get","getFriend","friend","debts","put","FriendForm","props","Form","useForm","form","useState","forceUpdate","useEffect","onFinish","value","friendName","newFriend","name","createdAt","Date","add","oncomplete","addFriend","response","reloadFriendList","layout","Item","label","required","shouldUpdate","type","htmlType","disabled","isFieldsTouched","getFieldsError","filter","errors","length","DebtModal","parse","Number","parseFloat","replaceAll","onDateChange","e","dispatchForm","date","toDate","initialValue","description","switch","dateForm","useReducer","state","newState","undefined","span","showTime","onChange","formState","title","modalState","visible","confirmLoading","onOk","setModalState","cancelDisabled","newDebt","debt","newIndex","Object","values","Math","max","keys","addDebt","reloadItems","message","createDebt","id","onCancel","okButtonProps","okDisabled","cancelButtonProps","closable","maskClosable","gutter","isNaN","Intl","NumberFormat","navigator","language","minimumFractionDigits","maximumFractionDigits","format","prefix","maxLength","TextArea","checked","DebtList","handleOk","columns","dataIndex","key","render","text","record","style","currency","placement","onClick","shape","icon","DeleteOutlined","footer","pagination","dataSource","FriendList","size","setListDebtState","UnorderedListOutlined","setDebtModalState","PlusCircleOutlined","onConfirm","delete","removeFriend","cancel","okText","cancelText","changePage","page","pageSize","dispatch","currPage","total","friendListState","items","defaultCurrent","initialState","current","showTotal","toString","onShowSizeChange","showSizeChanger","debtModalState","listDebtState","reducer","action","App","paginator","countRequest","count","friends","cursorOpener","openCursor","skipped","counter","cursor","offset","advance","push","limit","continue","data","getFriends","friendList","map","d","reduce","acc","cur","Content","Footer","href","Boolean","location","hostname","match","ReactDOM","StrictMode","document","getElementById","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.f5ee2c5a.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"./Header.css\";\r\n\r\nfunction Header() {\r\n\treturn (\r\n\t\t<div className=\"title\">\r\n\t\t\t<header >\r\n\t\t\t\t<h1 >Friend Debt</h1>\r\n\t\t\t\t<p>Never forget how much your friends owe you</p>\r\n\t\t\t</header>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Header;\r\n","let db;\r\nlet dbName = \"friendDebtDB\";\r\nlet friendStoreName = \"friend\";\r\n\r\nexport default function startDB(callback) {\r\n\tif (db) {\r\n\t\tcallback(db);\r\n\t} else {\r\n\t\tif (window.indexedDB) {\r\n\t\t\tconst request = window.indexedDB.open(dbName, 1);\r\n\t\t\trequest.onerror = (event) => {\r\n\t\t\t\tconsole.error(\"Error Request\", event);\r\n\t\t\t};\r\n\t\t\trequest.onsuccess = (event) => {\r\n\t\t\t\tdb = request.result;\r\n\t\t\t\tconsole.log(\"DB loaded\");\r\n\t\t\t\tcallback(db);\r\n\t\t\t};\r\n\t\t\trequest.onupgradeneeded = (event) => {\r\n\t\t\t\tdb = event.target.result;\r\n\t\t\t\tconst objectStoreFriend = createFriendStore();\r\n\t\t\t\tif (!objectStoreFriend) {\r\n\t\t\t\t\tconsole.error(\"Error creating friend store\");\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction createFriendStore() {\r\n\tconst objectStore = db.createObjectStore(friendStoreName, {\r\n\t\tkeyPath: \"id\",\r\n\t\tautoIncrement: true,\r\n\t});\r\n\r\n\tobjectStore.createIndex(\"name\", \"name\", { unique: false });\r\n\tobjectStore.createIndex(\"createdAt\", \"createdAt\", { unique: false });\r\n\tobjectStore.createIndex(\"debts\", \"debts\", { unique: false });\r\n\treturn objectStore;\r\n}\r\n\r\nexport function addFriend(friend, success, error) {\r\n\tif (!db) {\r\n\t\tconsole.error(\"db not found\");\r\n\t\treturn;\r\n\t} else {\r\n\t\tconst transaction = db.transaction([friendStoreName], \"readwrite\");\r\n\t\tconst objectStore = transaction.objectStore(friendStoreName);\r\n\t\tlet newFriend = {\r\n\t\t\tname: friend.name,\r\n\t\t\tcreatedAt: new Date(),\r\n\t\t\tdebts: {},\r\n\t\t};\r\n\t\tobjectStore.add(newFriend);\r\n\t\ttransaction.oncomplete = (event) => {\r\n\t\t\tsuccess(event);\r\n\t\t};\r\n\t\ttransaction.onerror = (event) => {\r\n\t\t\terror(event);\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport function removeFriend(friendId, success, error) {\r\n\tif (!db) {\r\n\t\tconsole.error(\"db not found\");\r\n\t\treturn;\r\n\t} else {\r\n\t\tconst transaction = db.transaction([friendStoreName], \"readwrite\");\r\n\t\tconst objectStore = transaction.objectStore(friendStoreName);\r\n\t\tobjectStore.delete(friendId);\r\n\t\ttransaction.oncomplete = (event) => {\r\n\t\t\tsuccess(event);\r\n\t\t};\r\n\t\ttransaction.onerror = (event) => {\r\n\t\t\terror(event);\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport function getFriend(friendId, success, error) {\r\n\tif (!db) {\r\n\t\tconsole.error(\"db not found\");\r\n\t\treturn;\r\n\t} else {\r\n\t\tconst transaction = db.transaction([friendStoreName], \"readwrite\");\r\n\t\tconst objectStore = transaction.objectStore(friendStoreName);\r\n\t\tconst request = objectStore.get(friendId);\r\n\t\trequest.onsuccess  = (event) => {\r\n\t\t\tsuccess(request.result);\r\n\t\t};\r\n\t\trequest.onerror = (event) => {\r\n\t\t\terror(event);\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport function getFriends(paginator, success, error) {\r\n\tif (!db) {\r\n\t\tconsole.error(\"db not found\");\r\n\t\treturn;\r\n\t} else {\r\n\t\tconst transaction = db.transaction(friendStoreName);\r\n\t\tconst objectStore = transaction.objectStore(friendStoreName);\r\n\t\tconst countRequest = objectStore.count();\r\n\t\tcountRequest.onsuccess = () => {\r\n\t\t\tconst friends = [];\r\n\t\t\tconst cursorOpener = objectStore.openCursor();\r\n\t\t\tlet skipped = false;\r\n\t\t\tlet counter = 0;\r\n\t\t\tcursorOpener.onsuccess = (event) => {\r\n\t\t\t\tlet cursor = event.target.result;\r\n\t\t\t\tif (cursor) {\r\n\t\t\t\t\tlet friend = cursor.value;\r\n\t\t\t\t\tif (paginator?.offset && !skipped) {\r\n\t\t\t\t\t\tskipped = true;\r\n\t\t\t\t\t\tcursor.advance(paginator?.offset);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfriends.push(friend);\r\n\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!(paginator?.limit && counter >= paginator?.limit)\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tcursor.continue();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcursor = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!cursor) {\r\n\t\t\t\t\tconst response = {\r\n\t\t\t\t\t\tdata: friends,\r\n\t\t\t\t\t\ttotal: countRequest.result,\r\n\t\t\t\t\t\tcurrPage: paginator?.offset / paginator?.limit + 1,\r\n\t\t\t\t\t\tpageSize: paginator?.limit,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tsuccess(response);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tcursorOpener.onerror = (event) => {\r\n\t\t\t\terror(event);\r\n\t\t\t};\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport function addDebt(friendId, debt, success, error) {\r\n\tif (!db) {\r\n\t\tconsole.error(\"db not found\");\r\n\t\treturn;\r\n\t} else {\r\n\t\tconst transaction = db.transaction([friendStoreName], \"readwrite\");\r\n\t\tconst objectStore = transaction.objectStore(friendStoreName);\r\n\t\tconst request = objectStore.get(friendId);\r\n\t\trequest.onsuccess = (event) => {\r\n\t\t\tconst friend = event.target.result;\r\n\t\t\tconst newIndex =\r\n\t\t\t\tObject.values(friend.debts).length > 0\r\n\t\t\t\t\t? Math.max(...Object.keys(friend.debts)) + 1\r\n\t\t\t\t\t: 0;\r\n\t\t\tdebt[\"id\"] = newIndex;\r\n\t\t\tfriend.debts[newIndex] = debt;\r\n\t\t\tconst newRequest = objectStore.put(friend);\r\n\t\t\tnewRequest.onsuccess = (event) => {\r\n\t\t\t\tsuccess(event);\r\n\t\t\t};\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport function removeDebt(friendId, debtId, success, error) {\r\n\tif (!db) {\r\n\t\tconsole.error(\"db not found\");\r\n\t\treturn;\r\n\t} else {\r\n\t\tgetFriend(friendId, (friend) => {\r\n\t\t\tdelete friend.debts[debtId]\r\n\t\t\tconst transaction = db.transaction([friendStoreName], \"readwrite\");\r\n\t\t\tconst objectStore = transaction.objectStore(friendStoreName);\r\n\t\t\tconst request = objectStore.put(friend)\r\n\t\t\trequest.onsuccess = (event) => {\r\n\t\t\t\tsuccess(friend)\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"./FriendForm.css\";\r\nimport { addFriend } from \"../../services/db.service\";\r\nimport { Form, Input, Button } from \"antd\";\r\n\r\nfunction FriendForm(props) {\r\n\r\n\r\n\tfunction onSubmit(value) {\r\n\t\tconsole.log(value.friendName);\r\n\t\tlet friend = {\r\n\t\t\tname: value.friendName,\r\n\t\t\tcreatedAt: new Date(),\r\n\t\t};\r\n\t\taddFriend(\r\n\t\t\tfriend,\r\n\t\t\t(response) => {\r\n\t\t\t\tprops.reloadFriendList();\r\n\t\t\t},\r\n\t\t\t(response) => {\r\n\t\t\t\tconsole.error(\"Fail\");\r\n\t\t\t\tconsole.error(response);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\tconst [form] = Form.useForm();\r\n\tconst [, forceUpdate] = useState();\r\n\tuseEffect(() => {\r\n\t\tforceUpdate({});\r\n\t}, []);\r\n\treturn (\r\n\t\t<div className=\"formWrapper\">\r\n\t\t\t<div>\r\n\t\t\t\t<h2>Create a new Friend</h2>\r\n\r\n\t\t\t\t<Form form={form} onFinish={onSubmit} layout=\"inline\">\r\n\t\t\t\t\t<Form.Item label=\"Friend Name\" name=\"friendName\" required>\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t<Form.Item shouldUpdate>\r\n\t\t\t\t\t\t{() => (\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\t\thtmlType=\"submit\"\r\n\t\t\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\t\t\t!form.isFieldsTouched(true) ||\r\n\t\t\t\t\t\t\t\t\tform\r\n\t\t\t\t\t\t\t\t\t\t.getFieldsError()\r\n\t\t\t\t\t\t\t\t\t\t.filter(({ errors }) => errors.length)\r\n\t\t\t\t\t\t\t\t\t\t.length\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCreate\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t</Form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default FriendForm;\r\n","import React, { useState, useReducer, useEffect } from \"react\";\r\nimport { Modal, Row, Col, Input, Switch, message, DatePicker } from \"antd\";\r\nimport { addDebt } from \"../../services/db.service\";\r\n\r\nfunction DebtModal(props) {\r\n\tfunction handleOk(e) {\r\n\t\tprops.setModalState({\r\n\t\t\tconfirmLoading: true,\r\n\t\t\tvisible: true,\r\n\t\t\tfriend: props.modalState.friend,\r\n\t\t\tcancelDisabled: true,\r\n\t\t});\r\n\t\tcreateDebt(\r\n\t\t\tprops.modalState.friend.id,\r\n\t\t\tparse(formState.value),\r\n\t\t\tformState.description,\r\n\t\t\tformState.switch ? new Date() : formState.date\r\n\t\t);\r\n\t}\r\n\r\n\tfunction handleCancel(e) {\r\n\t\tdispatchForm(initialValue);\r\n\t\tprops.setModalState({\r\n\t\t\tvisible: false,\r\n\t\t\tfriend: props.modalState.friend,\r\n\t\t});\r\n\t}\r\n\r\n\tfunction createDebt(friendId, value, description, date) {\r\n\t\tlet newDebt = {\r\n\t\t\tdescription: description,\r\n\t\t\tvalue: typeof value === \"string\" ? parse(value) : value,\r\n\t\t\tfriendId: friendId,\r\n\t\t\tcreatedAt: date,\r\n\t\t};\r\n\t\taddDebt(\r\n\t\t\tfriendId,\r\n\t\t\tnewDebt,\r\n\t\t\t(response) => {\r\n\t\t\t\tprops.reloadItems();\r\n\t\t\t\tprops.setModalState({\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tfriend: props.modalState.friend,\r\n\t\t\t\t});\r\n\t\t\t\tdispatchForm(initialValue);\r\n\t\t\t\tmessage.success(\"Debt created\");\r\n\t\t\t},\r\n\t\t\t(error) => {\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tfunction parse(value) {\r\n\t\treturn (\r\n\t\t\tNumber.parseFloat(value.replaceAll(\".\", \"\").replaceAll(\",\", \"\")) /\r\n\t\t\t100\r\n\t\t);\r\n\t}\r\n\r\n\tfunction onSwitchChange(e) {\r\n\t\tdispatchForm({\r\n\t\t\tswitch: e,\r\n\t\t});\r\n\t}\r\n\r\n\tfunction onDateChange(e) {\r\n\t\tdispatchForm({\r\n\t\t\tdate: e.toDate(),\r\n\t\t});\r\n\t}\r\n\r\n\tfunction onDescriptionChange(e) {\r\n\t\tlet { value } = e.target;\r\n\r\n\t\tdispatchForm({\r\n\t\t\tdescription: value,\r\n\t\t});\r\n\t}\r\n\r\n\tfunction onValueChange(e) {\r\n\t\tlet { value } = e.target;\r\n\t\tif (value === \"\") {\r\n\t\t\tvalue = 0.0;\r\n\t\t} else {\r\n\t\t\tvalue = parse(value);\r\n\t\t}\r\n\t\tif (!Number.isNaN(value)) {\r\n\t\t\tif (value === 0) {\r\n\t\t\t\tprops.setModalState({\r\n\t\t\t\t\tokDisabled: true,\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\tfriend: props.modalState.friend,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tprops.setModalState({\r\n\t\t\t\t\tokDisabled: false,\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\tfriend: props.modalState.friend,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tdispatchForm({\r\n\t\t\t\tvalue: Intl.NumberFormat(navigator.language, {\r\n\t\t\t\t\tminimumFractionDigits: 2,\r\n\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t}).format(value),\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tfunction reducerForm(state, newState) {\r\n\t\tif (newState.value !== undefined) {\r\n\t\t\tstate.value = newState.value;\r\n\t\t}\r\n\t\tif (newState.description !== undefined) {\r\n\t\t\tstate.description = newState.description;\r\n\t\t}\r\n\t\tif (newState.date !== undefined) {\r\n\t\t\tstate.date = newState.date;\r\n\t\t}\r\n\t\tif (newState.switch !== undefined) {\r\n\t\t\tstate.switch = newState.switch;\r\n\t\t\tif (state.switch) {\r\n\t\t\t\tstate.dateForm = <></>;\r\n\t\t\t} else {\r\n\t\t\t\tstate.dateForm = (\r\n\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t<Row>Date</Row>\r\n\t\t\t\t\t\t<DatePicker showTime onChange={onDateChange} />\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconsole.log(parse(state.value));\r\n\t\treturn { ...state };\r\n\t}\r\n\tconst initialValue = {\r\n\t\tvalue: \"0.00\",\r\n\t\tdescription: \"\",\r\n\t\tdate: new Date(),\r\n\t\tswitch: true,\r\n\t\tdateForm: <></>,\r\n\t};\r\n\tconst [, forceUpdate] = useState();\r\n\tuseEffect(() => {\r\n\t\tforceUpdate({});\r\n\t}, []);\r\n\tconst [formState, dispatchForm] = useReducer(reducerForm, initialValue);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Modal\r\n\t\t\t\ttitle={\"Add Debt to \" + props.modalState.friend?.name}\r\n\t\t\t\tvisible={props.modalState.visible}\r\n\t\t\t\tconfirmLoading={props.modalState.confirmLoading}\r\n\t\t\t\tonOk={handleOk}\r\n\t\t\t\tonCancel={handleCancel}\r\n\t\t\t\tokButtonProps={{\r\n\t\t\t\t\tdisabled: props.modalState.okDisabled,\r\n\t\t\t\t}}\r\n\t\t\t\tcancelButtonProps={{\r\n\t\t\t\t\tdisabled: props.modalState.cancelDisabled,\r\n\t\t\t\t}}\r\n\t\t\t\tclosable={false}\r\n\t\t\t\tmaskClosable={false}\r\n\t\t\t>\r\n\t\t\t\t<Row gutter={[16, 16]}>\r\n\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t<Row>Value</Row>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tvalue={formState.value}\r\n\t\t\t\t\t\t\tonChange={onValueChange}\r\n\t\t\t\t\t\t\tprefix=\"$\"\r\n\t\t\t\t\t\t\tmaxLength={12}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t<Row>Description</Row>\r\n\t\t\t\t\t\t<Input.TextArea\r\n\t\t\t\t\t\t\tvalue={formState.description}\r\n\t\t\t\t\t\t\tonChange={onDescriptionChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row gutter={[16, 16]}>\r\n\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t<Row>Current Date</Row>\r\n\t\t\t\t\t\t<Switch checked={formState.switch} onChange={onSwitchChange} />\r\n\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t{formState.dateForm}\r\n\t\t\t\t</Row>\r\n\t\t\t</Modal>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default DebtModal;\r\n","import React from \"react\";\r\nimport { Modal, Button, Table, Tooltip } from \"antd\";\r\nimport { DeleteOutlined } from \"@ant-design/icons\";\r\nimport { removeDebt } from \"../../services/db.service\";\r\nimport { format } from \"date-fns\";\r\n\r\nfunction DebtList(props) {\r\n\tfunction handleOk(e) {\r\n\t\tprops.setModalState({\r\n\t\t\tvisible: false,\r\n\t\t\tfriend: props.modalState.friend,\r\n\t\t});\r\n\t}\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: \"Value\",\r\n\t\t\tdataIndex: \"value\",\r\n\t\t\tkey: \"value\",\r\n\t\t\trender: (text, record) =>\r\n\t\t\t\tIntl.NumberFormat(navigator.language, {\r\n\t\t\t\t\tstyle: \"currency\",\r\n\t\t\t\t\tcurrency: props.currency,\r\n\t\t\t\t}).format(record.value),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Description\",\r\n\t\t\tdataIndex: \"description\",\r\n\t\t\tkey: \"description\",\r\n\t\t\trender: (text, record) => (\r\n\t\t\t\t<Tooltip placement=\"topLeft\" title={record.description}>\r\n\t\t\t\t\t{record.description}\r\n\t\t\t\t</Tooltip>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Date\",\r\n\t\t\tdataIndex: \"createdAt\",\r\n\t\t\tkey: \"createdAt\",\r\n\t\t\trender: (text, record) =>\r\n\t\t\t\tformat(record.createdAt, \"Pp\"),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Delete\",\r\n\t\t\tdataIndex: \"delete\",\r\n\t\t\tkey: \"delete\",\r\n\t\t\trender: (text, record) => (\r\n\t\t\t\t<Tooltip title={\"Delete Debt\"}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tremoveDebt(\r\n\t\t\t\t\t\t\t\trecord.friendId,\r\n\t\t\t\t\t\t\t\trecord.id,\r\n\t\t\t\t\t\t\t\t(response) => {\r\n\t\t\t\t\t\t\t\t\tprops.setModalState({\r\n\t\t\t\t\t\t\t\t\t\tokDisabled: true,\r\n\t\t\t\t\t\t\t\t\t\tvisible: true,\r\n\t\t\t\t\t\t\t\t\t\tfriend: response,\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tprops.reloadItems();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\ticon={<DeleteOutlined />}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Modal\r\n\t\t\t\ttitle={props.modalState.friend?.name + \" Debts\"}\r\n\t\t\t\tvisible={props.modalState.visible}\r\n\t\t\t\tonCancel={handleOk}\r\n\t\t\t\tonOk={handleOk}\r\n\t\t\t\tfooter={[\r\n\t\t\t\t\t<Button key=\"ok\" type=\"primary\" onClick={handleOk}>\r\n\t\t\t\t\t\tOk\r\n\t\t\t\t\t</Button>,\r\n\t\t\t\t]}\r\n\t\t\t>\r\n\t\t\t\t<Table\r\n\t\t\t\t\tpagination={false}\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\tdataSource={Object.values(\r\n\t\t\t\t\t\tprops.modalState.friend?.debts || {}\r\n\t\t\t\t\t)}\r\n\t\t\t\t/>\r\n\t\t\t</Modal>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default DebtList;\r\n","import React, { useEffect } from \"react\";\r\nimport {\r\n\tTable,\r\n\tPagination,\r\n\tSpace,\r\n\tButton,\r\n\tTooltip,\r\n\tPopconfirm,\r\n\tmessage,\r\n} from \"antd\";\r\nimport { removeFriend } from \"../../services/db.service\";\r\nimport {\r\n\tDeleteOutlined,\r\n\tPlusCircleOutlined,\r\n\tUnorderedListOutlined,\r\n} from \"@ant-design/icons\";\r\n\r\nimport \"./FriendList.css\";\r\nimport DebtModal from \"../DebtModal/DebtModal\";\r\nimport DebtList from \"../DebtList/DebtList\";\r\n\r\nfunction FriendList(props) {\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: \"Name\",\r\n\t\t\tdataIndex: \"name\",\r\n\t\t\tkey: \"name\",\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Last Debt Date\",\r\n\t\t\tdataIndex: \"date\",\r\n\t\t\tkey: \"date\",\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Total owed\",\r\n\t\t\tdataIndex: \"total\",\r\n\t\t\tkey: \"total\",\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Action\",\r\n\t\t\tkey: \"action\",\r\n\t\t\trender: (text, record) => (\r\n\t\t\t\t<Space size=\"middle\">\r\n\t\t\t\t\t<Tooltip title={\"List \" + record.friend.name + \"'s Debts\"}>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\tprops.setListDebtState({\r\n\t\t\t\t\t\t\t\t\tokDisabled: true,\r\n\t\t\t\t\t\t\t\t\tvisible: true,\r\n\t\t\t\t\t\t\t\t\tfriend: record.friend,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\ticon={<UnorderedListOutlined />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t<Tooltip title={\"Add Debt to \" + record.friend.name}>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\tprops.setDebtModalState({\r\n\t\t\t\t\t\t\t\t\tokDisabled: true,\r\n\t\t\t\t\t\t\t\t\tvisible: true,\r\n\t\t\t\t\t\t\t\t\tfriend: record.friend,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\ticon={<PlusCircleOutlined />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t<Popconfirm\r\n\t\t\t\t\t\ttitle={\r\n\t\t\t\t\t\t\t\"Are you sure you want to delete \" +\r\n\t\t\t\t\t\t\trecord.friend.name +\r\n\t\t\t\t\t\t\t\" and all its debts? This cannot be undone\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonConfirm={() => confirm(record.friend)}\r\n\t\t\t\t\t\tonCancel={cancel}\r\n\t\t\t\t\t\tokText=\"Yes\"\r\n\t\t\t\t\t\tcancelText=\"No\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Tooltip title={\"Delete \" + record.friend.name}>\r\n\t\t\t\t\t\t\t<Button shape=\"circle\" icon={<DeleteOutlined />} />\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t</Space>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\tfunction confirm(friend) {\r\n\t\tremoveFriend(\r\n\t\t\tfriend.id,\r\n\t\t\t() => {\r\n\t\t\t\tmessage.success(friend.name + \" deleted\");\r\n\t\t\t\tprops.reloadItems();\r\n\t\t\t},\r\n\t\t\t() => {}\r\n\t\t);\r\n\t}\r\n\r\n\tfunction cancel() {}\r\n\tfunction showTotal(total) {\r\n\t\treturn \"Total \" + total.toString();\r\n\t}\r\n\r\n\tfunction changePage(page, pageSize) {\r\n\t\tprops.dispatch({\r\n\t\t\tcurrPage: page,\r\n\t\t\tpageSize: pageSize,\r\n\t\t\ttotal: props.friendListState.total,\r\n\t\t\titems: props.friendListState.items,\r\n\t\t});\r\n\t}\r\n\r\n\tuseEffect(props.reloadItems, [\r\n\t\tprops.friendListState.currPage,\r\n\t\tprops.friendListState.pageSize,\r\n\t]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Table\r\n\t\t\t\tpagination={false}\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tdataSource={props.friendListState.items}\r\n\t\t\t/>\r\n\t\t\t<Pagination\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\ttotal={props.friendListState.total}\r\n\t\t\t\tdefaultCurrent={props.initialState.currPage}\r\n\t\t\t\tcurrent={props.friendListState.currPage}\r\n\t\t\t\tpageSize={props.friendListState.pageSize}\r\n\t\t\t\tshowTotal={showTotal}\r\n\t\t\t\tonChange={changePage}\r\n\t\t\t\tonShowSizeChange={changePage}\r\n\t\t\t\tshowSizeChanger\r\n\t\t\t/>\r\n\t\t\t<DebtModal\r\n\t\t\t\tsetModalState={props.setDebtModalState}\r\n\t\t\t\tmodalState={props.debtModalState}\r\n\t\t\t\treloadItems={props.reloadItems}\r\n\t\t\t\tcurrency={props.currency}\r\n\t\t\t></DebtModal>\r\n\t\t\t<DebtList\r\n\t\t\t\tsetModalState={props.setListDebtState}\r\n\t\t\t\tmodalState={props.listDebtState}\r\n\t\t\t\treloadItems={props.reloadItems}\r\n\t\t\t\tcurrency={props.currency}\r\n\t\t\t></DebtList>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default FriendList;\r\n","import React, { useReducer, useState } from \"react\";\nimport \"./App.css\";\nimport Header from \"./components/Header/Header\";\nimport FriendForm from \"./components/FriendForm/FriendForm\";\nimport FriendList from \"./components/FriendList/FriendList\";\nimport startDB, { getFriends } from \"./services/db.service\";\nimport { format, max } from \"date-fns\";\nimport { Layout } from \"antd\";\n\nfunction reducer(state, action) {\n\tlet newState = {\n\t\tcurrPage: action.currPage,\n\t\tpageSize: action.pageSize,\n\t\ttotal: action.total,\n\t\titems: action.items,\n\t};\n\treturn newState;\n}\nconst initialState = {\n\tcurrPage: 1,\n\tpageSize: 10,\n\ttotal: 0,\n\titems: [],\n};\n\nfunction App() {\n\tfunction reloadItems() {\n\t\tstartDB(() => {\n\t\t\tgetFriends(\n\t\t\t\t{\n\t\t\t\t\tlimit: friendListState.pageSize,\n\t\t\t\t\toffset:\n\t\t\t\t\t\tfriendListState.pageSize *\n\t\t\t\t\t\t(friendListState.currPage - 1),\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tconst friendList = [];\n\t\t\t\t\tfor (let friend of response.data) {\n\t\t\t\t\t\tfriendList.push({\n\t\t\t\t\t\t\tkey: friend.id.toString(),\n\t\t\t\t\t\t\tname: friend.name,\n\t\t\t\t\t\t\tdate:\n\t\t\t\t\t\t\t\tObject.values(friend.debts).length > 0\n\t\t\t\t\t\t\t\t\t? format(\n\t\t\t\t\t\t\t\t\t\t\tmax(\n\t\t\t\t\t\t\t\t\t\t\t\tObject.values(friend.debts).map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t(d) => d.createdAt\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\"Pp\"\n\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t: \"-\",\n\t\t\t\t\t\t\ttotal: Intl.NumberFormat(navigator.language, {\n\t\t\t\t\t\t\t\tstyle: \"currency\",\n\t\t\t\t\t\t\t\tcurrency: currency,\n\t\t\t\t\t\t\t}).format(\n\t\t\t\t\t\t\t\tObject.values(friend.debts).reduce(\n\t\t\t\t\t\t\t\t\t(acc, cur) => (acc += cur.value),\n\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tfriend: friend,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\tcurrPage: response.currPage,\n\t\t\t\t\t\tpageSize: response.pageSize,\n\t\t\t\t\t\ttotal: response.total,\n\t\t\t\t\t\titems: friendList,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\tfunction reloadFriendList() {\n\t\treloadItems();\n\t}\n\tconst [friendListState, dispatch] = useReducer(reducer, initialState);\n\tconst [debtModalState, setDebtModalState] = useState({\n\t\tvisible: false,\n\t\tfriend: undefined,\n\t\tokDisabled: true,\n\t});\n\tconst [listDebtState, setListDebtState] = useState({\n\t\tvisible: false,\n\t\tfriend: undefined,\n\t\tokDisabled: true,\n\t});\n\tconst [currency, setCurrency] = useState(\"BRL\");\n\n\treturn (\n\t\t<Layout className=\"layout\">\n\t\t\t<Header></Header>\n\t\t\t<Layout.Content className=\"content\">\n\t\t\t\t<div className=\"content-wrapper\">\n\t\t\t\t\t<FriendForm\n\t\t\t\t\t\treloadFriendList={reloadFriendList}\n\t\t\t\t\t></FriendForm>\n\t\t\t\t\t<FriendList\n\t\t\t\t\t\tfriendListState={friendListState}\n\t\t\t\t\t\tdispatch={dispatch}\n\t\t\t\t\t\tinitialState={initialState}\n\t\t\t\t\t\treloadItems={reloadItems}\n\t\t\t\t\t\tdebtModalState={debtModalState}\n\t\t\t\t\t\tsetDebtModalState={setDebtModalState}\n\t\t\t\t\t\tlistDebtState={listDebtState}\n\t\t\t\t\t\tsetListDebtState={setListDebtState}\n\t\t\t\t\t\tcurrency={currency}\n\t\t\t\t\t></FriendList>\n\t\t\t\t</div>\n\t\t\t</Layout.Content>\n\t\t\t<Layout.Footer className=\"footer\">\n\t\t\t\t<div>Made with ReactJs and Ant Design by MÃ¡rcio Medeiros</div>\n\t\t\t\t<div>\n\t\t\t\t\t<a href=\"https://github.com/MarcioMed07/Friend-Debt\">\n\t\t\t\t\t\tThis project is open source under the MIT license.\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</Layout.Footer>\n\t\t</Layout>\n\t);\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}