{"version":3,"sources":["components/Header/Header.js","services/db.service.js","components/FriendForm/FriendForm.js","components/DebtModal/DebtModal.js","components/DebtList/DebtList.js","components/FriendList/FriendList.js","App.js","serviceWorker.js","index.js"],"names":["Header","db","className","startDB","callback","window","indexedDB","request","open","onerror","event","console","error","onsuccess","result","log","onupgradeneeded","target","objectStore","createObjectStore","keyPath","autoIncrement","createIndex","unique","createFriendStore","removeDebt","friendId","debtId","success","transaction","get","getFriend","friend","debts","put","FriendForm","props","Form","useForm","form","useState","forceUpdate","useEffect","onFinish","value","friendName","newFriend","name","createdAt","Date","add","oncomplete","addFriend","response","reloadFriendList","layout","Item","label","required","maxLength","shouldUpdate","type","htmlType","disabled","isFieldsTouched","getFieldsError","filter","errors","length","DebtModal","parse","Number","parseFloat","replaceAll","onDateChange","e","dispatchForm","date","toDate","initialValue","description","switch","dateForm","useReducer","state","newState","undefined","span","showTime","onChange","formState","title","modalState","visible","confirmLoading","onOk","setModalState","cancelDisabled","newDebt","debt","newIndex","Object","values","Math","max","keys","addDebt","reloadItems","message","createDebt","id","onCancel","okButtonProps","okDisabled","cancelButtonProps","closable","maskClosable","gutter","isNaN","Intl","NumberFormat","navigator","language","minimumFractionDigits","maximumFractionDigits","format","prefix","TextArea","checked","DebtList","handleOk","columns","dataIndex","key","render","text","record","style","currency","placement","onClick","shape","icon","DeleteOutlined","footer","pagination","dataSource","FriendList","size","setListDebtState","UnorderedListOutlined","setDebtModalState","PlusCircleOutlined","onConfirm","delete","removeFriend","cancel","okText","cancelText","changePage","page","pageSize","dispatch","currPage","total","friendListState","items","defaultCurrent","initialState","current","showTotal","toString","onShowSizeChange","showSizeChanger","debtModalState","listDebtState","reducer","action","App","paginator","countRequest","count","friends","cursorOpener","openCursor","skipped","counter","cursor","offset","advance","push","limit","continue","data","getFriends","friendList","map","d","reduce","acc","cur","Content","Footer","href","Boolean","location","hostname","match","ReactDOM","StrictMode","document","getElementById","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"0VAceA,ICdXC,EDcWD,EAXf,WACC,OACC,yBAAKE,UAAU,SACd,gCACC,2CACA,4E,kBCJW,SAASC,EAAQC,GAC/B,GAAIH,EACHG,EAASH,QAET,GAAII,OAAOC,UAAW,CACrB,IAAMC,EAAUF,OAAOC,UAAUE,KARvB,eAQoC,GAC9CD,EAAQE,QAAU,SAACC,GAClBC,QAAQC,MAAM,gBAAiBF,IAEhCH,EAAQM,UAAY,SAACH,GACpBT,EAAKM,EAAQO,OACbH,QAAQI,IAAI,aACZX,EAASH,IAEVM,EAAQS,gBAAkB,SAACN,GAC1BT,EAAKS,EAAMO,OAAOH,OAUtB,WACC,IAAMI,EAAcjB,EAAGkB,kBA5BF,SA4BqC,CACzDC,QAAS,KACTC,eAAe,IAMhB,OAHAH,EAAYI,YAAY,OAAQ,OAAQ,CAAEC,QAAQ,IAClDL,EAAYI,YAAY,YAAa,YAAa,CAAEC,QAAQ,IAC5DL,EAAYI,YAAY,QAAS,QAAS,CAAEC,QAAQ,IAC7CL,EAlBsBM,IAEzBb,QAAQC,MAAM,iCAqJZ,SAASa,EAAWC,EAAUC,EAAQC,EAAShB,GAChDX,EA5FC,SAAmByB,EAAUE,EAAShB,GAC5C,GAAKX,EAAL,CAIC,IAEMM,EAFcN,EAAG4B,YAAY,CAnFf,UAmFkC,aACtBX,YApFZ,UAqFQY,IAAIJ,GAChCnB,EAAQM,UAAY,SAACH,GACpBkB,EAAQrB,EAAQO,SAEjBP,EAAQE,QAAU,SAACC,GAClBE,EAAMF,SAVPC,QAAQC,MAAM,gBA8FdmB,CAAUL,GAAU,SAACM,UACbA,EAAOC,MAAMN,GACA1B,EAAG4B,YAAY,CAhLhB,UAgLmC,aACtBX,YAjLb,UAkLSgB,IAAIF,GACxBnB,UAAY,SAACH,GACpBkB,EAAQI,OATVrB,QAAQC,MAAM,gB,8BChHDuB,MAxDf,SAAoBC,GAAO,MAkBXC,IAAKC,UAAbC,EAlBmB,sBAmBFC,qBAAfC,EAnBiB,oBAuB1B,OAHAC,qBAAU,WACTD,EAAY,MACV,IAEF,yBAAKvC,UAAU,eACd,6BACC,mDAEA,kBAAC,IAAD,CAAMqC,KAAMA,EAAMI,SA3BrB,SAAkBC,GACjBjC,QAAQI,IAAI6B,EAAMC,YDkCb,SAAmBb,EAAQJ,EAAShB,GAC1C,GAAKX,EAAL,CAIC,IAAM4B,EAAc5B,EAAG4B,YAAY,CA5Cf,UA4CkC,aAChDX,EAAcW,EAAYX,YA7CZ,UA8ChB4B,EAAY,CACfC,KAAMf,EAAOe,KACbC,UAAW,IAAIC,KACfhB,MAAO,IAERf,EAAYgC,IAAIJ,GAChBjB,EAAYsB,WAAa,SAACzC,GACzBkB,EAAQlB,IAETmB,EAAYpB,QAAU,SAACC,GACtBE,EAAMF,SAfPC,QAAQC,MAAM,gBC/BdwC,CAJa,CACZL,KAAMH,EAAMC,WACZG,UAAW,IAAIC,OAIf,SAACI,GACAjB,EAAMkB,sBAEP,SAACD,GACA1C,QAAQC,MAAM,QACdD,QAAQC,MAAMyC,OAcwBE,OAAO,UAC5C,kBAAC,IAAKC,KAAN,CAAWC,MAAM,cAAcV,KAAK,aAAaW,UAAQ,GACxD,kBAAC,IAAD,CAAOC,UAAW,MAGnB,kBAAC,IAAKH,KAAN,CAAWI,cAAY,IACrB,kBACA,kBAAC,IAAD,CACCC,KAAK,UACLC,SAAS,SACTC,UACExB,EAAKyB,iBAAgB,IACtBzB,EACE0B,iBACAC,QAAO,qBAAGC,OAAoBC,UAC9BA,QARJ,iB,+IC8JQC,MAlMf,SAAmBjC,GAAQ,IAAD,EAiDzB,SAASkC,EAAM1B,GACd,OACC2B,OAAOC,WAAW5B,EAAM6B,WAAW,IAAK,IAAIA,WAAW,IAAK,KAC5D,IAUF,SAASC,EAAaC,GACrBC,EAAa,CACZC,KAAMF,EAAEG,WAmEV,IAAMC,EAAe,CACpBnC,MAAO,OACPoC,YAAa,GACbH,KAAM,IAAI5B,KACVgC,QAAQ,EACRC,SAAU,sCAxIc,EA0ID1C,qBAAfC,EA1IgB,oBA2IzBC,qBAAU,WACTD,EAAY,MACV,IA7IsB,MA8IS0C,sBArClC,SAAqBC,EAAOC,GAwB3B,YAvBuBC,IAAnBD,EAASzC,QACZwC,EAAMxC,MAAQyC,EAASzC,YAEK0C,IAAzBD,EAASL,cACZI,EAAMJ,YAAcK,EAASL,kBAERM,IAAlBD,EAASR,OACZO,EAAMP,KAAOQ,EAASR,WAECS,IAApBD,EAASJ,SACZG,EAAMH,OAASI,EAASJ,OACpBG,EAAMH,OACTG,EAAMF,SAAW,qCAEjBE,EAAMF,SACL,kBAAC,IAAD,CAAKK,KAAM,IACV,kBAAC,IAAD,aACA,kBAAC,IAAD,CAAYC,UAAQ,EAACC,SAAUf,MAKnC/D,QAAQI,IAAIuD,EAAMc,EAAMxC,QACjB,eAAKwC,KAa6CL,GA9IjC,mBA8IlBW,EA9IkB,KA8IPd,EA9IO,KA+IzB,OACC,oCACC,kBAAC,IAAD,CACCe,MAAO,0BAAiBvD,EAAMwD,WAAW5D,cAAlC,aAAiB,EAAyBe,MACjD8C,QAASzD,EAAMwD,WAAWC,QAC1BC,eAAgB1D,EAAMwD,WAAWE,eACjCC,KApJH,SAAkBpB,GACjBvC,EAAM4D,cAAc,CACnBF,gBAAgB,EAChBD,SAAS,EACT7D,OAAQI,EAAMwD,WAAW5D,OACzBiE,gBAAgB,IAkBlB,SAAoBvE,EAAUkB,EAAOoC,EAAaH,GACjD,IAAIqB,EAAU,CACblB,YAAaA,EACbpC,MAAwB,kBAAVA,EAAqB0B,EAAM1B,GAASA,EAClDlB,SAAUA,EACVsB,UAAW6B,IFkHP,SAAiBnD,EAAUyE,EAAMvE,EAAShB,GAChD,GAAKX,EAAL,CAIC,IACMiB,EADcjB,EAAG4B,YAAY,CAtJf,UAsJkC,aACtBX,YAvJZ,UAwJJA,EAAYY,IAAIJ,GACxBb,UAAY,SAACH,GACpB,IAAMsB,EAAStB,EAAMO,OAAOH,OACtBsF,EACLC,OAAOC,OAAOtE,EAAOC,OAAOmC,OAAS,EAClCmC,KAAKC,IAAL,MAAAD,KAAI,YAAQF,OAAOI,KAAKzE,EAAOC,SAAU,EACzC,EACJkE,EAAI,GAASC,EACbpE,EAAOC,MAAMmE,GAAYD,EACNjF,EAAYgB,IAAIF,GACxBnB,UAAY,SAACH,GACvBkB,EAAQlB,UAhBVC,QAAQC,MAAM,gBElHd8F,CACChF,EACAwE,GACA,SAAC7C,GACAjB,EAAMuE,cACNvE,EAAM4D,cAAc,CACnBH,SAAS,EACT7D,OAAQI,EAAMwD,WAAW5D,SAE1B4C,EAAaG,GACb6B,IAAQhF,QAAQ,mBAjClBiF,CACCzE,EAAMwD,WAAW5D,OAAO8E,GACxBxC,EAAMoB,EAAU9C,OAChB8C,EAAUV,YACVU,EAAUT,OAAS,IAAIhC,KAASyC,EAAUb,OA0IzCkC,SAtIH,SAAsBpC,GACrBC,EAAaG,GACb3C,EAAM4D,cAAc,CACnBH,SAAS,EACT7D,OAAQI,EAAMwD,WAAW5D,UAmIxBgF,cAAe,CACdjD,SAAU3B,EAAMwD,WAAWqB,YAE5BC,kBAAmB,CAClBnD,SAAU3B,EAAMwD,WAAWK,gBAE5BkB,UAAU,EACVC,cAAc,GAEd,kBAAC,IAAD,CAAKC,OAAQ,CAAC,GAAI,KACjB,kBAAC,IAAD,CAAK9B,KAAM,IACV,kBAAC,IAAD,cACA,kBAAC,IAAD,CACC3C,MAAO8C,EAAU9C,MACjB6C,SAzFN,SAAuBd,GAAI,IACpB/B,EAAU+B,EAAE1D,OAAZ2B,MAELA,EADa,KAAVA,EACK,EAEA0B,EAAM1B,GAEV2B,OAAO+C,MAAM1E,KACH,IAAVA,EACHR,EAAM4D,cAAc,CACnBiB,YAAY,EACZpB,SAAS,EACT7D,OAAQI,EAAMwD,WAAW5D,SAG1BI,EAAM4D,cAAc,CACnBiB,YAAY,EACZpB,SAAS,EACT7D,OAAQI,EAAMwD,WAAW5D,SAG3B4C,EAAa,CACZhC,MAAO2E,KAAKC,aAAaC,UAAUC,SAAU,CAC5CC,sBAAuB,EACvBC,sBAAuB,IACrBC,OAAOjF,OAiEPkF,OAAO,IACPnE,UAAW,MAGb,kBAAC,IAAD,CAAK4B,KAAM,IACV,kBAAC,IAAD,oBACA,kBAAC,IAAMwC,SAAP,CACCnF,MAAO8C,EAAUV,YACjBS,SA1GN,SAA6Bd,GAAI,IAC1B/B,EAAU+B,EAAE1D,OAAZ2B,MAENgC,EAAa,CACZI,YAAapC,SA0GZ,kBAAC,IAAD,CAAKyE,OAAQ,CAAC,GAAI,KACjB,kBAAC,IAAD,CAAK9B,KAAM,IACV,kBAAC,IAAD,qBACA,kBAAC,IAAD,CACCyC,QAAStC,EAAUT,OACnBQ,SA/HN,SAAwBd,GACvBC,EAAa,CACZK,OAAQN,QAiILe,EAAUR,a,SChGD+C,MAzFf,SAAkB7F,GAAQ,IAAD,IACxB,SAAS8F,EAASvD,GACjBvC,EAAM4D,cAAc,CACnBH,SAAS,EACT7D,OAAQI,EAAMwD,WAAW5D,SAI3B,IAAMmG,EAAU,CACf,CACCxC,MAAO,QACPyC,UAAW,QACXC,IAAK,QACLC,OAAQ,SAACC,EAAMC,GAAP,OACPjB,KAAKC,aAAaC,UAAUC,SAAU,CACrCe,MAAO,WACPC,SAAUtG,EAAMsG,WACdb,OAAOW,EAAO5F,SAEnB,CACC+C,MAAO,cACPyC,UAAW,cACXC,IAAK,cACLC,OAAQ,SAACC,EAAMC,GAAP,OACP,kBAAC,IAAD,CAASG,UAAU,UAAUhD,MAAO6C,EAAOxD,aACzCwD,EAAOxD,eAIX,CACCW,MAAO,OACPyC,UAAW,YACXC,IAAK,YACLC,OAAQ,SAACC,EAAMC,GAAP,OAAkBX,YAAOW,EAAOxF,UAAW,QAEpD,CACC2C,MAAO,SACPyC,UAAW,SACXC,IAAK,SACLC,OAAQ,SAACC,EAAMC,GAAP,OACP,kBAAC,IAAD,CAAS7C,MAAO,eACf,kBAAC,IAAD,CACCiD,QAAS,WACRnH,EACC+G,EAAO9G,SACP8G,EAAO1B,IACP,SAACzD,GACAjB,EAAM4D,cAAc,CACnBiB,YAAY,EACZpB,SAAS,EACT7D,OAAQqB,IAETjB,EAAMuE,kBAITkC,MAAM,SACNC,KAAM,kBAACC,EAAA,EAAD,YAOX,OACC,oCACC,kBAAC,IAAD,CACCpD,OAAO,UAAAvD,EAAMwD,WAAW5D,cAAjB,eAAyBe,MAAO,SACvC8C,QAASzD,EAAMwD,WAAWC,QAC1BkB,SAAUmB,EACVnC,KAAMmC,EACNc,OAAQ,CACP,kBAAC,IAAD,CAAQX,IAAI,KAAKxE,KAAK,UAAU+E,QAASV,GAAzC,QAKD,kBAAC,IAAD,CACCe,YAAY,EACZd,QAASA,EACTe,WAAY7C,OAAOC,QAClB,UAAAlE,EAAMwD,WAAW5D,cAAjB,eAAyBC,QAAS,SCkEzBkH,MApIf,SAAoB/G,GACnB,IAAM+F,EAAU,CACf,CACCxC,MAAO,OACPyC,UAAW,OACXC,IAAK,QAEN,CACC1C,MAAO,iBACPyC,UAAW,OACXC,IAAK,QAEN,CACC1C,MAAO,aACPyC,UAAW,QACXC,IAAK,SAEN,CACC1C,MAAO,SACP0C,IAAK,SACLC,OAAQ,SAACC,EAAMC,GAAP,OACP,kBAAC,IAAD,CAAOY,KAAK,UACX,kBAAC,IAAD,CAASzD,MAAO,QAAU6C,EAAOxG,OAAOe,KAAO,YAC9C,kBAAC,IAAD,CACC6F,QAAS,kBACRxG,EAAMiH,iBAAiB,CACtBpC,YAAY,EACZpB,SAAS,EACT7D,OAAQwG,EAAOxG,UAGjB6G,MAAM,SACNC,KAAM,kBAACQ,EAAA,EAAD,SAGR,kBAAC,IAAD,CAAS3D,MAAO,eAAiB6C,EAAOxG,OAAOe,MAC9C,kBAAC,IAAD,CACC6F,QAAS,kBACRxG,EAAMmH,kBAAkB,CACvBtC,YAAY,EACZpB,SAAS,EACT7D,OAAQwG,EAAOxG,UAGjB6G,MAAM,SACNC,KAAM,kBAACU,EAAA,EAAD,SAGR,kBAAC,IAAD,CACC7D,MACC,mCACA6C,EAAOxG,OAAOe,KACd,4CAED0G,UAAW,WAchB,IAAiBzH,GJ1BX,SAAsBN,EAAUE,EAAShB,GAC/C,GAAKX,EAAL,CAIC,IAAM4B,EAAc5B,EAAG4B,YAAY,CAlEf,UAkEkC,aAClCA,EAAYX,YAnEZ,UAoERwI,OAAOhI,GACnBG,EAAYsB,WAAa,SAACzC,GACzBkB,EAAQlB,IAETmB,EAAYpB,QAAU,SAACC,GACtBE,EAAMF,SAVPC,QAAQC,MAAM,gBIyBd+I,EADgB3H,EAdawG,EAAOxG,QAgB5B8E,IACP,WACCF,IAAQhF,QAAQI,EAAOe,KAAO,YAC9BX,EAAMuE,iBAEP,gBApBGI,SAAU6C,EACVC,OAAO,MACPC,WAAW,MAEX,kBAAC,IAAD,CAASnE,MAAO,UAAY6C,EAAOxG,OAAOe,MACzC,kBAAC,IAAD,CAAQ8F,MAAM,SAASC,KAAM,kBAACC,EAAA,EAAD,cAmBnC,SAASa,KAKT,SAASG,EAAWC,EAAMC,GACzB7H,EAAM8H,SAAS,CACdC,SAAUH,EACVC,SAAUA,EACVG,MAAOhI,EAAMiI,gBAAgBD,MAC7BE,MAAOlI,EAAMiI,gBAAgBC,QAS/B,OALA5H,oBAAUN,EAAMuE,YAAa,CAC5BvE,EAAMiI,gBAAgBF,SACtB/H,EAAMiI,gBAAgBJ,WAItB,oCACC,kBAAC,IAAD,CACChB,YAAY,EACZd,QAASA,EACTe,WAAY9G,EAAMiI,gBAAgBC,QAEnC,kBAAC,IAAD,CACClB,KAAK,QACLgB,MAAOhI,EAAMiI,gBAAgBD,MAC7BG,eAAgBnI,EAAMoI,aAAaL,SACnCM,QAASrI,EAAMiI,gBAAgBF,SAC/BF,SAAU7H,EAAMiI,gBAAgBJ,SAChCS,UA/BH,SAAmBN,GAClB,MAAO,SAAWA,EAAMO,YA+BtBlF,SAAUsE,EACVa,iBAAkBb,EAClBc,iBAAe,IAEhB,kBAAC,EAAD,CACC7E,cAAe5D,EAAMmH,kBACrB3D,WAAYxD,EAAM0I,eAClBnE,YAAavE,EAAMuE,YACnB+B,SAAUtG,EAAMsG,WAEjB,kBAAC,EAAD,CACC1C,cAAe5D,EAAMiH,iBACrBzD,WAAYxD,EAAM2I,cAClBpE,YAAavE,EAAMuE,YACnB+B,SAAUtG,EAAMsG,a,kBC1IpB,SAASsC,EAAQ5F,EAAO6F,GAOvB,MANe,CACdd,SAAUc,EAAOd,SACjBF,SAAUgB,EAAOhB,SACjBG,MAAOa,EAAOb,MACdE,MAAOW,EAAOX,OAIhB,IAAME,EAAe,CACpBL,SAAU,EACVF,SAAU,GACVG,MAAO,EACPE,MAAO,IAqGOY,MAlGf,WACC,SAASvE,IACRxG,GAAQ,YLsEH,SAAoBgL,EAAWvJ,EAAShB,GAC9C,GAAKX,EAAL,CAIC,IACMiB,EADcjB,EAAG4B,YApGH,UAqGYX,YArGZ,UAsGdkK,EAAelK,EAAYmK,QACjCD,EAAavK,UAAY,WACxB,IAAMyK,EAAU,GACVC,EAAerK,EAAYsK,aAC7BC,GAAU,EACVC,EAAU,EACdH,EAAa1K,UAAY,SAACH,GACzB,IAAIiL,EAASjL,EAAMO,OAAOH,OAC1B,GAAI6K,EAAQ,CACX,IAAI3J,EAAS2J,EAAO/I,OACP,OAATuI,QAAS,IAATA,OAAA,EAAAA,EAAWS,UAAWH,GACzBA,GAAU,EACVE,EAAOE,QAAP,OAAeV,QAAf,IAAeA,OAAf,EAAeA,EAAWS,UAE1BN,EAAQQ,KAAK9J,GACb0J,KAEY,OAATP,QAAS,IAATA,OAAA,EAAAA,EAAWY,QAASL,IAAO,OAAIP,QAAJ,IAAIA,OAAJ,EAAIA,EAAWY,OAI5CJ,EAAS,KAFTA,EAAOK,YAMV,IAAKL,EAAQ,CACZ,IAAMtI,EAAW,CAChB4I,KAAMX,EACNlB,MAAOgB,EAAatK,OACpBqJ,UAAmB,OAATgB,QAAS,IAATA,OAAA,EAAAA,EAAWS,SAAX,OAAoBT,QAApB,IAAoBA,OAApB,EAAoBA,EAAWY,OAAQ,EACjD9B,SAAQ,OAAEkB,QAAF,IAAEA,OAAF,EAAEA,EAAWY,OAEtBnK,EAAQyB,KAIVkI,EAAa9K,QAAU,SAACC,GACvBE,EAAMF,UA1CRC,QAAQC,MAAM,gBKvEbsL,CACC,CACCH,MAAO1B,EAAgBJ,SACvB2B,OACCvB,EAAgBJ,UACfI,EAAgBF,SAAW,KAE9B,SAAC9G,GACA,IADa,EACP8I,EAAa,GADN,cAEM9I,EAAS4I,MAFf,IAEb,2BAAkC,CAAC,IAA1BjK,EAAyB,QACjCmK,EAAWL,KAAK,CACfzD,IAAKrG,EAAO8E,GAAG6D,WACf5H,KAAMf,EAAOe,KACb8B,KACCwB,OAAOC,OAAOtE,EAAOC,OAAOmC,OAAS,EAClCyD,YACArB,YACCH,OAAOC,OAAOtE,EAAOC,OAAOmK,KAC3B,SAACC,GAAD,OAAOA,EAAErJ,cAGX,MAEA,IACJoH,MAAO7C,KAAKC,aAAaC,UAAUC,SAAU,CAC5Ce,MAAO,WACPC,SAAUA,IACRb,OACFxB,OAAOC,OAAOtE,EAAOC,OAAOqK,QAC3B,SAACC,EAAKC,GAAN,OAAeD,EAAOC,EAAI5J,QAC1B,IAGFZ,OAAQA,KA1BG,8BA6BbkI,EAAS,CACRC,SAAU9G,EAAS8G,SACnBF,SAAU5G,EAAS4G,SACnBG,MAAO/G,EAAS+G,MAChBE,MAAO6B,UA3CE,MAoDsBhH,qBAAW6F,EAASR,GApD1C,mBAoDPH,EApDO,KAoDUH,EApDV,OAqD8B1H,mBAAS,CACpDqD,SAAS,EACT7D,YAAQsD,EACR2B,YAAY,IAxDC,mBAqDP6D,EArDO,KAqDSvB,EArDT,OA0D4B/G,mBAAS,CAClDqD,SAAS,EACT7D,YAAQsD,EACR2B,YAAY,IA7DC,mBA0DP8D,EA1DO,KA0DQ1B,EA1DR,OA+DkB7G,mBAAS,OA/D3B,mBA+DPkG,EA/DO,KAiEd,OAjEc,KAkEb,kBAAC,IAAD,CAAQxI,UAAU,UACjB,kBAAC,EAAD,MACA,kBAAC,IAAOuM,QAAR,CAAgBvM,UAAU,WACzB,yBAAKA,UAAU,mBACd,kBAAC,EAAD,CACCoD,iBAtBL,WACCqD,OAuBG,kBAAC,EAAD,CACC0D,gBAAiBA,EACjBH,SAAUA,EACVM,aAAcA,EACd7D,YAAaA,EACbmE,eAAgBA,EAChBvB,kBAAmBA,EACnBwB,cAAeA,EACf1B,iBAAkBA,EAClBX,SAAUA,MAIb,kBAAC,IAAOgE,OAAR,CAAexM,UAAU,UACxB,uFACA,6BACC,uBAAGyM,KAAK,8CAAR,0DCtGeC,QACU,cAA7BvM,OAAOwM,SAASC,UAEc,UAA7BzM,OAAOwM,SAASC,UAEhBzM,OAAOwM,SAASC,SAASC,MACxB,2DCZHC,IAAS1E,OACR,kBAAC,IAAM2E,WAAP,KACC,kBAAC,EAAD,OAEDC,SAASC,eAAe,SD0HpB,kBAAmB1F,WACtBA,UAAU2F,cAAcC,MACtBC,MAAK,SAACC,GACNA,EAAaC,gBAEbC,OAAM,SAAC7M,GACPD,QAAQC,MAAMA,EAAMgG,c","file":"static/js/main.bd090ebd.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"./Header.css\";\r\n\r\nfunction Header() {\r\n\treturn (\r\n\t\t<div className=\"title\">\r\n\t\t\t<header>\r\n\t\t\t\t<h1>Friend Debt</h1>\r\n\t\t\t\t<p>Never forget how much your friends owe you</p>\r\n\t\t\t</header>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Header;\r\n","let db;\r\nlet dbName = \"friendDebtDB\";\r\nlet friendStoreName = \"friend\";\r\n\r\nexport default function startDB(callback) {\r\n\tif (db) {\r\n\t\tcallback(db);\r\n\t} else {\r\n\t\tif (window.indexedDB) {\r\n\t\t\tconst request = window.indexedDB.open(dbName, 1);\r\n\t\t\trequest.onerror = (event) => {\r\n\t\t\t\tconsole.error(\"Error Request\", event);\r\n\t\t\t};\r\n\t\t\trequest.onsuccess = (event) => {\r\n\t\t\t\tdb = request.result;\r\n\t\t\t\tconsole.log(\"DB loaded\");\r\n\t\t\t\tcallback(db);\r\n\t\t\t};\r\n\t\t\trequest.onupgradeneeded = (event) => {\r\n\t\t\t\tdb = event.target.result;\r\n\t\t\t\tconst objectStoreFriend = createFriendStore();\r\n\t\t\t\tif (!objectStoreFriend) {\r\n\t\t\t\t\tconsole.error(\"Error creating friend store\");\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction createFriendStore() {\r\n\tconst objectStore = db.createObjectStore(friendStoreName, {\r\n\t\tkeyPath: \"id\",\r\n\t\tautoIncrement: true,\r\n\t});\r\n\r\n\tobjectStore.createIndex(\"name\", \"name\", { unique: false });\r\n\tobjectStore.createIndex(\"createdAt\", \"createdAt\", { unique: false });\r\n\tobjectStore.createIndex(\"debts\", \"debts\", { unique: false });\r\n\treturn objectStore;\r\n}\r\n\r\nexport function addFriend(friend, success, error) {\r\n\tif (!db) {\r\n\t\tconsole.error(\"db not found\");\r\n\t\treturn;\r\n\t} else {\r\n\t\tconst transaction = db.transaction([friendStoreName], \"readwrite\");\r\n\t\tconst objectStore = transaction.objectStore(friendStoreName);\r\n\t\tlet newFriend = {\r\n\t\t\tname: friend.name,\r\n\t\t\tcreatedAt: new Date(),\r\n\t\t\tdebts: {},\r\n\t\t};\r\n\t\tobjectStore.add(newFriend);\r\n\t\ttransaction.oncomplete = (event) => {\r\n\t\t\tsuccess(event);\r\n\t\t};\r\n\t\ttransaction.onerror = (event) => {\r\n\t\t\terror(event);\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport function removeFriend(friendId, success, error) {\r\n\tif (!db) {\r\n\t\tconsole.error(\"db not found\");\r\n\t\treturn;\r\n\t} else {\r\n\t\tconst transaction = db.transaction([friendStoreName], \"readwrite\");\r\n\t\tconst objectStore = transaction.objectStore(friendStoreName);\r\n\t\tobjectStore.delete(friendId);\r\n\t\ttransaction.oncomplete = (event) => {\r\n\t\t\tsuccess(event);\r\n\t\t};\r\n\t\ttransaction.onerror = (event) => {\r\n\t\t\terror(event);\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport function getFriend(friendId, success, error) {\r\n\tif (!db) {\r\n\t\tconsole.error(\"db not found\");\r\n\t\treturn;\r\n\t} else {\r\n\t\tconst transaction = db.transaction([friendStoreName], \"readwrite\");\r\n\t\tconst objectStore = transaction.objectStore(friendStoreName);\r\n\t\tconst request = objectStore.get(friendId);\r\n\t\trequest.onsuccess = (event) => {\r\n\t\t\tsuccess(request.result);\r\n\t\t};\r\n\t\trequest.onerror = (event) => {\r\n\t\t\terror(event);\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport function getFriends(paginator, success, error) {\r\n\tif (!db) {\r\n\t\tconsole.error(\"db not found\");\r\n\t\treturn;\r\n\t} else {\r\n\t\tconst transaction = db.transaction(friendStoreName);\r\n\t\tconst objectStore = transaction.objectStore(friendStoreName);\r\n\t\tconst countRequest = objectStore.count();\r\n\t\tcountRequest.onsuccess = () => {\r\n\t\t\tconst friends = [];\r\n\t\t\tconst cursorOpener = objectStore.openCursor();\r\n\t\t\tlet skipped = false;\r\n\t\t\tlet counter = 0;\r\n\t\t\tcursorOpener.onsuccess = (event) => {\r\n\t\t\t\tlet cursor = event.target.result;\r\n\t\t\t\tif (cursor) {\r\n\t\t\t\t\tlet friend = cursor.value;\r\n\t\t\t\t\tif (paginator?.offset && !skipped) {\r\n\t\t\t\t\t\tskipped = true;\r\n\t\t\t\t\t\tcursor.advance(paginator?.offset);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfriends.push(friend);\r\n\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!(paginator?.limit && counter >= paginator?.limit)\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tcursor.continue();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcursor = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!cursor) {\r\n\t\t\t\t\tconst response = {\r\n\t\t\t\t\t\tdata: friends,\r\n\t\t\t\t\t\ttotal: countRequest.result,\r\n\t\t\t\t\t\tcurrPage: paginator?.offset / paginator?.limit + 1,\r\n\t\t\t\t\t\tpageSize: paginator?.limit,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tsuccess(response);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tcursorOpener.onerror = (event) => {\r\n\t\t\t\terror(event);\r\n\t\t\t};\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport function addDebt(friendId, debt, success, error) {\r\n\tif (!db) {\r\n\t\tconsole.error(\"db not found\");\r\n\t\treturn;\r\n\t} else {\r\n\t\tconst transaction = db.transaction([friendStoreName], \"readwrite\");\r\n\t\tconst objectStore = transaction.objectStore(friendStoreName);\r\n\t\tconst request = objectStore.get(friendId);\r\n\t\trequest.onsuccess = (event) => {\r\n\t\t\tconst friend = event.target.result;\r\n\t\t\tconst newIndex =\r\n\t\t\t\tObject.values(friend.debts).length > 0\r\n\t\t\t\t\t? Math.max(...Object.keys(friend.debts)) + 1\r\n\t\t\t\t\t: 0;\r\n\t\t\tdebt[\"id\"] = newIndex;\r\n\t\t\tfriend.debts[newIndex] = debt;\r\n\t\t\tconst newRequest = objectStore.put(friend);\r\n\t\t\tnewRequest.onsuccess = (event) => {\r\n\t\t\t\tsuccess(event);\r\n\t\t\t};\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport function removeDebt(friendId, debtId, success, error) {\r\n\tif (!db) {\r\n\t\tconsole.error(\"db not found\");\r\n\t\treturn;\r\n\t} else {\r\n\t\tgetFriend(friendId, (friend) => {\r\n\t\t\tdelete friend.debts[debtId];\r\n\t\t\tconst transaction = db.transaction([friendStoreName], \"readwrite\");\r\n\t\t\tconst objectStore = transaction.objectStore(friendStoreName);\r\n\t\t\tconst request = objectStore.put(friend);\r\n\t\t\trequest.onsuccess = (event) => {\r\n\t\t\t\tsuccess(friend);\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"./FriendForm.css\";\r\nimport { addFriend } from \"../../services/db.service\";\r\nimport { Form, Input, Button } from \"antd\";\r\n\r\nfunction FriendForm(props) {\r\n\tfunction onSubmit(value) {\r\n\t\tconsole.log(value.friendName);\r\n\t\tlet friend = {\r\n\t\t\tname: value.friendName,\r\n\t\t\tcreatedAt: new Date(),\r\n\t\t};\r\n\t\taddFriend(\r\n\t\t\tfriend,\r\n\t\t\t(response) => {\r\n\t\t\t\tprops.reloadFriendList();\r\n\t\t\t},\r\n\t\t\t(response) => {\r\n\t\t\t\tconsole.error(\"Fail\");\r\n\t\t\t\tconsole.error(response);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\tconst [form] = Form.useForm();\r\n\tconst [, forceUpdate] = useState();\r\n\tuseEffect(() => {\r\n\t\tforceUpdate({});\r\n\t}, []);\r\n\treturn (\r\n\t\t<div className=\"formWrapper\">\r\n\t\t\t<div>\r\n\t\t\t\t<h2>Create a new Friend</h2>\r\n\r\n\t\t\t\t<Form form={form} onFinish={onSubmit} layout=\"inline\">\r\n\t\t\t\t\t<Form.Item label=\"Friend Name\" name=\"friendName\" required>\r\n\t\t\t\t\t\t<Input maxLength={70} />\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t<Form.Item shouldUpdate>\r\n\t\t\t\t\t\t{() => (\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\t\thtmlType=\"submit\"\r\n\t\t\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\t\t\t!form.isFieldsTouched(true) ||\r\n\t\t\t\t\t\t\t\t\tform\r\n\t\t\t\t\t\t\t\t\t\t.getFieldsError()\r\n\t\t\t\t\t\t\t\t\t\t.filter(({ errors }) => errors.length)\r\n\t\t\t\t\t\t\t\t\t\t.length\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCreate\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t</Form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default FriendForm;\r\n","import React, { useState, useReducer, useEffect } from \"react\";\r\nimport { Modal, Row, Col, Input, Switch, message, DatePicker } from \"antd\";\r\nimport { addDebt } from \"../../services/db.service\";\r\n\r\nfunction DebtModal(props) {\r\n\tfunction handleOk(e) {\r\n\t\tprops.setModalState({\r\n\t\t\tconfirmLoading: true,\r\n\t\t\tvisible: true,\r\n\t\t\tfriend: props.modalState.friend,\r\n\t\t\tcancelDisabled: true,\r\n\t\t});\r\n\t\tcreateDebt(\r\n\t\t\tprops.modalState.friend.id,\r\n\t\t\tparse(formState.value),\r\n\t\t\tformState.description,\r\n\t\t\tformState.switch ? new Date() : formState.date\r\n\t\t);\r\n\t}\r\n\r\n\tfunction handleCancel(e) {\r\n\t\tdispatchForm(initialValue);\r\n\t\tprops.setModalState({\r\n\t\t\tvisible: false,\r\n\t\t\tfriend: props.modalState.friend,\r\n\t\t});\r\n\t}\r\n\r\n\tfunction createDebt(friendId, value, description, date) {\r\n\t\tlet newDebt = {\r\n\t\t\tdescription: description,\r\n\t\t\tvalue: typeof value === \"string\" ? parse(value) : value,\r\n\t\t\tfriendId: friendId,\r\n\t\t\tcreatedAt: date,\r\n\t\t};\r\n\t\taddDebt(\r\n\t\t\tfriendId,\r\n\t\t\tnewDebt,\r\n\t\t\t(response) => {\r\n\t\t\t\tprops.reloadItems();\r\n\t\t\t\tprops.setModalState({\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tfriend: props.modalState.friend,\r\n\t\t\t\t});\r\n\t\t\t\tdispatchForm(initialValue);\r\n\t\t\t\tmessage.success(\"Debt created\");\r\n\t\t\t},\r\n\t\t\t(error) => {\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tfunction parse(value) {\r\n\t\treturn (\r\n\t\t\tNumber.parseFloat(value.replaceAll(\".\", \"\").replaceAll(\",\", \"\")) /\r\n\t\t\t100\r\n\t\t);\r\n\t}\r\n\r\n\tfunction onSwitchChange(e) {\r\n\t\tdispatchForm({\r\n\t\t\tswitch: e,\r\n\t\t});\r\n\t}\r\n\r\n\tfunction onDateChange(e) {\r\n\t\tdispatchForm({\r\n\t\t\tdate: e.toDate(),\r\n\t\t});\r\n\t}\r\n\r\n\tfunction onDescriptionChange(e) {\r\n\t\tlet { value } = e.target;\r\n\r\n\t\tdispatchForm({\r\n\t\t\tdescription: value,\r\n\t\t});\r\n\t}\r\n\r\n\tfunction onValueChange(e) {\r\n\t\tlet { value } = e.target;\r\n\t\tif (value === \"\") {\r\n\t\t\tvalue = 0.0;\r\n\t\t} else {\r\n\t\t\tvalue = parse(value);\r\n\t\t}\r\n\t\tif (!Number.isNaN(value)) {\r\n\t\t\tif (value === 0) {\r\n\t\t\t\tprops.setModalState({\r\n\t\t\t\t\tokDisabled: true,\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\tfriend: props.modalState.friend,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tprops.setModalState({\r\n\t\t\t\t\tokDisabled: false,\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\tfriend: props.modalState.friend,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tdispatchForm({\r\n\t\t\t\tvalue: Intl.NumberFormat(navigator.language, {\r\n\t\t\t\t\tminimumFractionDigits: 2,\r\n\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t}).format(value),\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tfunction reducerForm(state, newState) {\r\n\t\tif (newState.value !== undefined) {\r\n\t\t\tstate.value = newState.value;\r\n\t\t}\r\n\t\tif (newState.description !== undefined) {\r\n\t\t\tstate.description = newState.description;\r\n\t\t}\r\n\t\tif (newState.date !== undefined) {\r\n\t\t\tstate.date = newState.date;\r\n\t\t}\r\n\t\tif (newState.switch !== undefined) {\r\n\t\t\tstate.switch = newState.switch;\r\n\t\t\tif (state.switch) {\r\n\t\t\t\tstate.dateForm = <></>;\r\n\t\t\t} else {\r\n\t\t\t\tstate.dateForm = (\r\n\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t<Row>Date</Row>\r\n\t\t\t\t\t\t<DatePicker showTime onChange={onDateChange} />\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconsole.log(parse(state.value));\r\n\t\treturn { ...state };\r\n\t}\r\n\tconst initialValue = {\r\n\t\tvalue: \"0.00\",\r\n\t\tdescription: \"\",\r\n\t\tdate: new Date(),\r\n\t\tswitch: true,\r\n\t\tdateForm: <></>,\r\n\t};\r\n\tconst [, forceUpdate] = useState();\r\n\tuseEffect(() => {\r\n\t\tforceUpdate({});\r\n\t}, []);\r\n\tconst [formState, dispatchForm] = useReducer(reducerForm, initialValue);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Modal\r\n\t\t\t\ttitle={\"Add Debt to \" + props.modalState.friend?.name}\r\n\t\t\t\tvisible={props.modalState.visible}\r\n\t\t\t\tconfirmLoading={props.modalState.confirmLoading}\r\n\t\t\t\tonOk={handleOk}\r\n\t\t\t\tonCancel={handleCancel}\r\n\t\t\t\tokButtonProps={{\r\n\t\t\t\t\tdisabled: props.modalState.okDisabled,\r\n\t\t\t\t}}\r\n\t\t\t\tcancelButtonProps={{\r\n\t\t\t\t\tdisabled: props.modalState.cancelDisabled,\r\n\t\t\t\t}}\r\n\t\t\t\tclosable={false}\r\n\t\t\t\tmaskClosable={false}\r\n\t\t\t>\r\n\t\t\t\t<Row gutter={[16, 16]}>\r\n\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t<Row>Value</Row>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tvalue={formState.value}\r\n\t\t\t\t\t\t\tonChange={onValueChange}\r\n\t\t\t\t\t\t\tprefix=\"$\"\r\n\t\t\t\t\t\t\tmaxLength={12}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t<Row>Description</Row>\r\n\t\t\t\t\t\t<Input.TextArea\r\n\t\t\t\t\t\t\tvalue={formState.description}\r\n\t\t\t\t\t\t\tonChange={onDescriptionChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row gutter={[16, 16]}>\r\n\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t<Row>Current Date</Row>\r\n\t\t\t\t\t\t<Switch\r\n\t\t\t\t\t\t\tchecked={formState.switch}\r\n\t\t\t\t\t\t\tonChange={onSwitchChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t{formState.dateForm}\r\n\t\t\t\t</Row>\r\n\t\t\t</Modal>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default DebtModal;\r\n","import React from \"react\";\r\nimport { Modal, Button, Table, Tooltip } from \"antd\";\r\nimport { DeleteOutlined } from \"@ant-design/icons\";\r\nimport { removeDebt } from \"../../services/db.service\";\r\nimport { format } from \"date-fns\";\r\n\r\nfunction DebtList(props) {\r\n\tfunction handleOk(e) {\r\n\t\tprops.setModalState({\r\n\t\t\tvisible: false,\r\n\t\t\tfriend: props.modalState.friend,\r\n\t\t});\r\n\t}\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: \"Value\",\r\n\t\t\tdataIndex: \"value\",\r\n\t\t\tkey: \"value\",\r\n\t\t\trender: (text, record) =>\r\n\t\t\t\tIntl.NumberFormat(navigator.language, {\r\n\t\t\t\t\tstyle: \"currency\",\r\n\t\t\t\t\tcurrency: props.currency,\r\n\t\t\t\t}).format(record.value),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Description\",\r\n\t\t\tdataIndex: \"description\",\r\n\t\t\tkey: \"description\",\r\n\t\t\trender: (text, record) => (\r\n\t\t\t\t<Tooltip placement=\"topLeft\" title={record.description}>\r\n\t\t\t\t\t{record.description}\r\n\t\t\t\t</Tooltip>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Date\",\r\n\t\t\tdataIndex: \"createdAt\",\r\n\t\t\tkey: \"createdAt\",\r\n\t\t\trender: (text, record) => format(record.createdAt, \"Pp\"),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Delete\",\r\n\t\t\tdataIndex: \"delete\",\r\n\t\t\tkey: \"delete\",\r\n\t\t\trender: (text, record) => (\r\n\t\t\t\t<Tooltip title={\"Delete Debt\"}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tremoveDebt(\r\n\t\t\t\t\t\t\t\trecord.friendId,\r\n\t\t\t\t\t\t\t\trecord.id,\r\n\t\t\t\t\t\t\t\t(response) => {\r\n\t\t\t\t\t\t\t\t\tprops.setModalState({\r\n\t\t\t\t\t\t\t\t\t\tokDisabled: true,\r\n\t\t\t\t\t\t\t\t\t\tvisible: true,\r\n\t\t\t\t\t\t\t\t\t\tfriend: response,\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tprops.reloadItems();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\ticon={<DeleteOutlined />}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Modal\r\n\t\t\t\ttitle={props.modalState.friend?.name + \" Debts\"}\r\n\t\t\t\tvisible={props.modalState.visible}\r\n\t\t\t\tonCancel={handleOk}\r\n\t\t\t\tonOk={handleOk}\r\n\t\t\t\tfooter={[\r\n\t\t\t\t\t<Button key=\"ok\" type=\"primary\" onClick={handleOk}>\r\n\t\t\t\t\t\tOk\r\n\t\t\t\t\t</Button>,\r\n\t\t\t\t]}\r\n\t\t\t>\r\n\t\t\t\t<Table\r\n\t\t\t\t\tpagination={false}\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\tdataSource={Object.values(\r\n\t\t\t\t\t\tprops.modalState.friend?.debts || {}\r\n\t\t\t\t\t)}\r\n\t\t\t\t/>\r\n\t\t\t</Modal>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default DebtList;\r\n","import React, { useEffect } from \"react\";\r\nimport {\r\n\tTable,\r\n\tPagination,\r\n\tSpace,\r\n\tButton,\r\n\tTooltip,\r\n\tPopconfirm,\r\n\tmessage,\r\n} from \"antd\";\r\nimport { removeFriend } from \"../../services/db.service\";\r\nimport {\r\n\tDeleteOutlined,\r\n\tPlusCircleOutlined,\r\n\tUnorderedListOutlined,\r\n} from \"@ant-design/icons\";\r\n\r\nimport \"./FriendList.css\";\r\nimport DebtModal from \"../DebtModal/DebtModal\";\r\nimport DebtList from \"../DebtList/DebtList\";\r\n\r\nfunction FriendList(props) {\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: \"Name\",\r\n\t\t\tdataIndex: \"name\",\r\n\t\t\tkey: \"name\",\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Last Debt Date\",\r\n\t\t\tdataIndex: \"date\",\r\n\t\t\tkey: \"date\",\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Total owed\",\r\n\t\t\tdataIndex: \"total\",\r\n\t\t\tkey: \"total\",\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Action\",\r\n\t\t\tkey: \"action\",\r\n\t\t\trender: (text, record) => (\r\n\t\t\t\t<Space size=\"middle\">\r\n\t\t\t\t\t<Tooltip title={\"List \" + record.friend.name + \"'s Debts\"}>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\tprops.setListDebtState({\r\n\t\t\t\t\t\t\t\t\tokDisabled: true,\r\n\t\t\t\t\t\t\t\t\tvisible: true,\r\n\t\t\t\t\t\t\t\t\tfriend: record.friend,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\ticon={<UnorderedListOutlined />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t<Tooltip title={\"Add Debt to \" + record.friend.name}>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\tprops.setDebtModalState({\r\n\t\t\t\t\t\t\t\t\tokDisabled: true,\r\n\t\t\t\t\t\t\t\t\tvisible: true,\r\n\t\t\t\t\t\t\t\t\tfriend: record.friend,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\ticon={<PlusCircleOutlined />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t<Popconfirm\r\n\t\t\t\t\t\ttitle={\r\n\t\t\t\t\t\t\t\"Are you sure you want to delete \" +\r\n\t\t\t\t\t\t\trecord.friend.name +\r\n\t\t\t\t\t\t\t\" and all its debts? This cannot be undone\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonConfirm={() => confirm(record.friend)}\r\n\t\t\t\t\t\tonCancel={cancel}\r\n\t\t\t\t\t\tokText=\"Yes\"\r\n\t\t\t\t\t\tcancelText=\"No\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Tooltip title={\"Delete \" + record.friend.name}>\r\n\t\t\t\t\t\t\t<Button shape=\"circle\" icon={<DeleteOutlined />} />\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t</Space>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\tfunction confirm(friend) {\r\n\t\tremoveFriend(\r\n\t\t\tfriend.id,\r\n\t\t\t() => {\r\n\t\t\t\tmessage.success(friend.name + \" deleted\");\r\n\t\t\t\tprops.reloadItems();\r\n\t\t\t},\r\n\t\t\t() => {}\r\n\t\t);\r\n\t}\r\n\r\n\tfunction cancel() {}\r\n\tfunction showTotal(total) {\r\n\t\treturn \"Total \" + total.toString();\r\n\t}\r\n\r\n\tfunction changePage(page, pageSize) {\r\n\t\tprops.dispatch({\r\n\t\t\tcurrPage: page,\r\n\t\t\tpageSize: pageSize,\r\n\t\t\ttotal: props.friendListState.total,\r\n\t\t\titems: props.friendListState.items,\r\n\t\t});\r\n\t}\r\n\r\n\tuseEffect(props.reloadItems, [\r\n\t\tprops.friendListState.currPage,\r\n\t\tprops.friendListState.pageSize,\r\n\t]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Table\r\n\t\t\t\tpagination={false}\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tdataSource={props.friendListState.items}\r\n\t\t\t/>\r\n\t\t\t<Pagination\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\ttotal={props.friendListState.total}\r\n\t\t\t\tdefaultCurrent={props.initialState.currPage}\r\n\t\t\t\tcurrent={props.friendListState.currPage}\r\n\t\t\t\tpageSize={props.friendListState.pageSize}\r\n\t\t\t\tshowTotal={showTotal}\r\n\t\t\t\tonChange={changePage}\r\n\t\t\t\tonShowSizeChange={changePage}\r\n\t\t\t\tshowSizeChanger\r\n\t\t\t/>\r\n\t\t\t<DebtModal\r\n\t\t\t\tsetModalState={props.setDebtModalState}\r\n\t\t\t\tmodalState={props.debtModalState}\r\n\t\t\t\treloadItems={props.reloadItems}\r\n\t\t\t\tcurrency={props.currency}\r\n\t\t\t></DebtModal>\r\n\t\t\t<DebtList\r\n\t\t\t\tsetModalState={props.setListDebtState}\r\n\t\t\t\tmodalState={props.listDebtState}\r\n\t\t\t\treloadItems={props.reloadItems}\r\n\t\t\t\tcurrency={props.currency}\r\n\t\t\t></DebtList>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default FriendList;\r\n","import React, { useReducer, useState } from \"react\";\nimport \"./App.css\";\nimport Header from \"./components/Header/Header\";\nimport FriendForm from \"./components/FriendForm/FriendForm\";\nimport FriendList from \"./components/FriendList/FriendList\";\nimport startDB, { getFriends } from \"./services/db.service\";\nimport { format, max } from \"date-fns\";\nimport { Layout } from \"antd\";\n\nfunction reducer(state, action) {\n\tlet newState = {\n\t\tcurrPage: action.currPage,\n\t\tpageSize: action.pageSize,\n\t\ttotal: action.total,\n\t\titems: action.items,\n\t};\n\treturn newState;\n}\nconst initialState = {\n\tcurrPage: 1,\n\tpageSize: 10,\n\ttotal: 0,\n\titems: [],\n};\n\nfunction App() {\n\tfunction reloadItems() {\n\t\tstartDB(() => {\n\t\t\tgetFriends(\n\t\t\t\t{\n\t\t\t\t\tlimit: friendListState.pageSize,\n\t\t\t\t\toffset:\n\t\t\t\t\t\tfriendListState.pageSize *\n\t\t\t\t\t\t(friendListState.currPage - 1),\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tconst friendList = [];\n\t\t\t\t\tfor (let friend of response.data) {\n\t\t\t\t\t\tfriendList.push({\n\t\t\t\t\t\t\tkey: friend.id.toString(),\n\t\t\t\t\t\t\tname: friend.name,\n\t\t\t\t\t\t\tdate:\n\t\t\t\t\t\t\t\tObject.values(friend.debts).length > 0\n\t\t\t\t\t\t\t\t\t? format(\n\t\t\t\t\t\t\t\t\t\t\tmax(\n\t\t\t\t\t\t\t\t\t\t\t\tObject.values(friend.debts).map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t(d) => d.createdAt\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\"Pp\"\n\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t: \"-\",\n\t\t\t\t\t\t\ttotal: Intl.NumberFormat(navigator.language, {\n\t\t\t\t\t\t\t\tstyle: \"currency\",\n\t\t\t\t\t\t\t\tcurrency: currency,\n\t\t\t\t\t\t\t}).format(\n\t\t\t\t\t\t\t\tObject.values(friend.debts).reduce(\n\t\t\t\t\t\t\t\t\t(acc, cur) => (acc += cur.value),\n\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tfriend: friend,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\tcurrPage: response.currPage,\n\t\t\t\t\t\tpageSize: response.pageSize,\n\t\t\t\t\t\ttotal: response.total,\n\t\t\t\t\t\titems: friendList,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\tfunction reloadFriendList() {\n\t\treloadItems();\n\t}\n\tconst [friendListState, dispatch] = useReducer(reducer, initialState);\n\tconst [debtModalState, setDebtModalState] = useState({\n\t\tvisible: false,\n\t\tfriend: undefined,\n\t\tokDisabled: true,\n\t});\n\tconst [listDebtState, setListDebtState] = useState({\n\t\tvisible: false,\n\t\tfriend: undefined,\n\t\tokDisabled: true,\n\t});\n\tconst [currency, setCurrency] = useState(\"BRL\");\n\n\treturn (\n\t\t<Layout className=\"layout\">\n\t\t\t<Header></Header>\n\t\t\t<Layout.Content className=\"content\">\n\t\t\t\t<div className=\"content-wrapper\">\n\t\t\t\t\t<FriendForm\n\t\t\t\t\t\treloadFriendList={reloadFriendList}\n\t\t\t\t\t></FriendForm>\n\t\t\t\t\t<FriendList\n\t\t\t\t\t\tfriendListState={friendListState}\n\t\t\t\t\t\tdispatch={dispatch}\n\t\t\t\t\t\tinitialState={initialState}\n\t\t\t\t\t\treloadItems={reloadItems}\n\t\t\t\t\t\tdebtModalState={debtModalState}\n\t\t\t\t\t\tsetDebtModalState={setDebtModalState}\n\t\t\t\t\t\tlistDebtState={listDebtState}\n\t\t\t\t\t\tsetListDebtState={setListDebtState}\n\t\t\t\t\t\tcurrency={currency}\n\t\t\t\t\t></FriendList>\n\t\t\t\t</div>\n\t\t\t</Layout.Content>\n\t\t\t<Layout.Footer className=\"footer\">\n\t\t\t\t<div>Made with ReactJs and Ant Design by Márcio Medeiros</div>\n\t\t\t\t<div>\n\t\t\t\t\t<a href=\"https://github.com/MarcioMed07/Friend-Debt\">\n\t\t\t\t\t\tThis project is open source under the MIT license.\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</Layout.Footer>\n\t\t</Layout>\n\t);\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === \"localhost\" ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === \"[::1]\" ||\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\n\t\twindow.location.hostname.match(\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n\t\t)\n);\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener(\"load\", () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\"This web app is being served cache-first by a service \" +\n\t\t\t\t\t\t\t\"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl, config) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then((registration) => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing;\n\t\t\t\tif (installingWorker == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === \"installed\") {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t\"New content is available and will be used when all \" +\n\t\t\t\t\t\t\t\t\t\"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log(\"Content is cached for offline use.\");\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error(\"Error during service worker registration:\", error);\n\t\t});\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl, {\n\t\theaders: { \"Service-Worker\": \"script\" },\n\t})\n\t\t.then((response) => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get(\"content-type\");\n\t\t\tif (\n\t\t\t\tresponse.status === 404 ||\n\t\t\t\t(contentType != null &&\n\t\t\t\t\tcontentType.indexOf(\"javascript\") === -1)\n\t\t\t) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log(\n\t\t\t\t\"No internet connection found. App is running in offline mode.\"\n\t\t\t);\n\t\t});\n}\n\nexport function unregister() {\n\tif (\"serviceWorker\" in navigator) {\n\t\tnavigator.serviceWorker.ready\n\t\t\t.then((registration) => {\n\t\t\t\tregistration.unregister();\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error(error.message);\n\t\t\t});\n\t}\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}